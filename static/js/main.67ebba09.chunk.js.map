{"version":3,"sources":["routes.js","services/api.js","pages/HomePage/HomePage.js","components/SearchBar/SearchBar.js","pages/MoviesPage/MoviesPage.js","components/Cast/Cast.js","components/Reviews/Reviews.js","pages/MovieDetailsPage/MovieDetailsPage.js","components/Navigation/Navigation.js","components/App.js","index.js"],"names":["key","popularMovies","axios","get","searchFilms","query","searchExactShow","id","getMovieCast","getMovieReviews","HomePage","state","movies","popularSearchMovies","API","then","res","setState","data","results","this","map","el","to","title","name","Component","SearchBar","value","handelChange","e","target","handelSubmit","preventDefault","onSubmit","props","onChange","type","MoviesPage","films","fetchFilms","onSearchSubmit","history","location","push","search","currentSearch","URLSearchParams","prevProps","prevState","prevSearch","console","log","Cast","cast","searchMoviesCast","params","match","movieId","cast_id","src","profile_path","alt","character","Reviews","reviews","searchMoviesReviews","length","author","content","MovieDetailsPage","show","genres","searchFindFilm","returnToPrevLoc","goBack","reduce","acc","onClick","poster_path","overview","vote_average","url","path","exact","component","Navigation","routes","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.67ebba09.chunk.js","sourcesContent":["export default {\n  HOME: '/',\n  MOVIES: '/movies',\n  MOVIES_DETAILS: '/movies/:movieId',\n  CAST: '/movies/:movieId/cast',\n  REVIEWS: '/movies/:movieId/reviews',\n};\n","import axios from 'axios';\n\nconst key = '2964dee6f9b3937b53e885a7fa2424ff';\n\nexport const popularMovies = () => {\n  return axios.get(\n    `https://api.themoviedb.org/3/trending/all/day?api_key=${key}`,\n  );\n};\n\nexport const searchFilms = query => {\n  return axios.get(\n    `https://api.themoviedb.org/3/search/movie?api_key=${key}&query=${query}`,\n  );\n};\n\nexport const searchExactShow = id => {\n  return axios.get(`https://api.themoviedb.org/3/movie/${id}?api_key=${key}`);\n};\n\nexport const getMovieCast = id => {\n  return axios.get(\n    `https://api.themoviedb.org/3/movie/${id}/credits?api_key=${key}`,\n  );\n};\n\nexport const getMovieReviews = id => {\n  return axios.get(\n    `https://api.themoviedb.org/3/movie/${id}/reviews?api_key=${key}`,\n  );\n};\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport * as API from '../../services/api';\n\nexport default class HomePage extends Component {\n  state = {\n    movies: [],\n  };\n\n  componentDidMount() {\n    const { movies } = this.state;\n    this.popularSearchMovies(movies);\n  }\n\n  popularSearchMovies = () => {\n    API.popularMovies().then(res => {\n      this.setState({ movies: res.data.results });\n    });\n\n    // fetch(\n    //   'https://api.themoviedb.org/3/trending/all/day?api_key=2964dee6f9b3937b53e885a7fa2424ff',\n    // )\n    //   .then(res => res.json())\n    //   .then(data => {\n    //     this.setState({ movies: data.results });\n    //   });\n  };\n\n  render() {\n    const { movies } = this.state;\n    return (\n      <div>\n        <ul>\n          {movies.map(el => (\n            <li key={el.id}>\n              <Link to={`/movies/${el.id}`}>{el.title || el.name}</Link>\n            </li>\n          ))}\n        </ul>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\n// import PropTypes from 'prop-types';\n\nexport default class SearchBar extends Component {\n  state = {\n    value: '',\n  };\n\n  handelChange = e => {\n    this.setState({ value: e.target.value });\n  };\n\n  handelSubmit = e => {\n    e.preventDefault();\n\n    const { onSubmit } = this.props;\n    const { value } = this.state;\n    onSubmit(value);\n    this.setState({ value: '' });\n  };\n\n  render() {\n    const { value } = this.state;\n    return (\n      <form onSubmit={this.handelSubmit}>\n        <input onChange={this.handelChange} value={value} type=\"text\" />\n        <button type=\"submit\">Search</button>\n      </form>\n    );\n  }\n}\n","import React, { Component } from 'react';\n// import PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport SearchBar from '../../components/SearchBar/SearchBar';\nimport * as API from '../../services/api';\n\nexport default class MoviesPage extends Component {\n  state = {\n    films: [],\n  };\n\n  componentDidMount() {\n    const { location } = this.props;\n    const currentSearch = new URLSearchParams(location.search).get('search');\n    if (!currentSearch) {\n      return;\n    }\n    this.fetchFilms(currentSearch);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevSearch = new URLSearchParams(prevProps.location.search).get(\n      'search',\n    );\n    const { location } = this.props;\n    const currentSearch = new URLSearchParams(location.search).get('search');\n    console.log('prevSearch :', prevSearch);\n    console.log('currentSearch :', currentSearch);\n\n    if (prevSearch && prevSearch === currentSearch) {\n      return;\n    }\n\n    this.fetchFilms(currentSearch);\n  }\n\n  fetchFilms = query => {\n    API.searchFilms(query).then(res =>\n      this.setState({ films: res.data.results }),\n    );\n  };\n\n  onSearchSubmit = query => {\n    const { history, location } = this.props;\n\n    history.push({ ...location, search: `?search=${query}` });\n  };\n\n  render() {\n    const { films } = this.state;\n    return (\n      <div>\n        <SearchBar onSubmit={this.onSearchSubmit} />\n        <ul>\n          {films.map(el => (\n            <li key={el.id}>\n              <Link to={`/movies/${el.id}`}>{el.title || el.name}</Link>\n            </li>\n          ))}\n        </ul>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport * as API from '../../services/api';\n\nexport default class Cast extends Component {\n  state = {\n    cast: [],\n  };\n\n  componentDidMount() {\n    const { params } = this.props.match;\n    this.searchMoviesCast(params.movieId);\n  }\n\n  searchMoviesCast = id => {\n    API.getMovieCast(id).then(res => this.setState({ cast: res.data.cast }));\n  };\n\n  render() {\n    const { cast } = this.state;\n    return (\n      <ul>\n        {cast.map(el => (\n          <li key={el.cast_id}>\n            <img\n              src={`https://image.tmdb.org/t/p/w200${el.profile_path}`}\n              alt=\"\"\n            />\n            <p>{el.name}</p>\n            <p>{el.character}</p>\n          </li>\n        ))}\n      </ul>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport * as API from '../../services/api';\n\nexport default class Reviews extends Component {\n  state = {\n    reviews: [],\n  };\n\n  componentDidMount() {\n    const { params } = this.props.match;\n    this.searchMoviesReviews(params.movieId);\n  }\n\n  searchMoviesReviews = id => {\n    API.getMovieReviews(id).then(res =>\n      this.setState({ reviews: res.data.results }),\n    );\n  };\n\n  render() {\n    const { reviews } = this.state;\n    return (\n      <ul>\n        {(reviews.length > 0 &&\n          reviews.map(el => (\n            <li key={el.id}>\n              <p>Author:{el.author}</p>\n              <p>{el.content}</p>\n            </li>\n          ))) || <p>Sorry</p>}\n      </ul>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { Link, Route, Switch } from 'react-router-dom';\nimport * as API from '../../services/api';\n// import routes from '../../routes';\nimport Cast from '../../components/Cast/Cast';\nimport Reviews from '../../components/Reviews/Reviews';\n\nexport default class MovieDetailsPage extends Component {\n  state = { show: { genres: [] } };\n\n  componentDidMount() {\n    const { params } = this.props.match;\n    this.searchFindFilm(params.movieId);\n  }\n\n  searchFindFilm = id => {\n    API.searchExactShow(id).then(res => this.setState({ show: res.data }));\n  };\n\n  returnToPrevLoc = () => {\n    const { history } = this.props;\n    history.goBack();\n  };\n\n  render() {\n    const { show } = this.state;\n    const { match } = this.props;\n    const genres = show.genres.reduce((acc, el) => `${acc}  ${el.name}`, '');\n    return (\n      <div>\n        <button onClick={this.returnToPrevLoc} type=\"button\">\n          Go back\n        </button>\n        {show && (\n          <>\n            <h2>{show.title}</h2>\n            <img\n              src={`https://image.tmdb.org/t/p/w500${show.poster_path}`}\n              alt=\"\"\n            />\n            <h3>Описание: </h3>\n            <p>{show.overview}</p>\n            <h3>Оценка пользовател:</h3>\n            <p>{show.vote_average * 10} %</p>\n            <h3>Жанр:</h3>\n            <ul>\n              <li>{genres}</li>\n            </ul>\n          </>\n        )}\n        <ul>\n          <li>\n            <Link to={`${match.url}/cast`}>Cast</Link>\n          </li>\n          <li>\n            <Link to={`${match.url}/reviews`}>Reviews</Link>\n          </li>\n        </ul>\n\n        <Switch>\n          <Route path={`${match.path}/cast`} exact component={Cast} />\n          <Route path={`${match.path}/reviews`} exact component={Reviews} />\n        </Switch>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { NavLink } from 'react-router-dom';\nimport routes from '../../routes';\n\nconst Navigation = () => {\n  return (\n    <ul>\n      <li>\n        <NavLink to={routes.HOME}>Home page</NavLink>\n      </li>\n      <li>\n        <NavLink to={routes.MOVIES}>Movies page</NavLink>\n      </li>\n    </ul>\n  );\n};\n\nexport default Navigation;\n","import React, { Component } from 'react';\nimport { Route } from 'react-router-dom';\nimport routes from '../routes';\nimport HomePage from '../pages/HomePage/HomePage';\nimport MoviesPage from '../pages/MoviesPage/MoviesPage';\nimport MovieDetailsPage from '../pages/MovieDetailsPage/MovieDetailsPage';\n// import NotFoundPage from '../pages/NotFoundPage/NotFoundPage';\nimport Navigation from './Navigation/Navigation';\n\nexport default class App extends Component {\n  state = {};\n\n  render() {\n    return (\n      <div>\n        <Navigation />\n        <hr />\n        <Route exact path={routes.HOME} component={HomePage} />\n        <Route exact path={routes.MOVIES} component={MoviesPage} />\n        <Route path={routes.MOVIES_DETAILS} component={MovieDetailsPage} />\n        {/* <Route component={NotFoundPage} />\n        <Redirect to=\"/\" /> */}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\nimport App from './components/App';\n\nReactDOM.render(\n  <HashRouter>\n    <App />\n  </HashRouter>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}